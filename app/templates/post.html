{% extends 'base.html' %}
{% import 'bootstrap/wtf.html' as wtf %}


{% block content %}
<div class="p-5 mb-4 bg-light rounded-3">
  <div class="container-fluid py-5">
    <h1 class="display-5 fw-bold">Custom jumbotron</h1>
    <p class="col-md-8 fs-4">Using a series of utilities, you can create this jumbotron, just like the one in previous versions of Bootstrap. Check out the examples below for how you can remix and restyle it to your liking.</p>
  </div>
</div>
<div class="container">
  <article class="media content-section mb-5">
    <div class="media-body">
      <div class="article-metadata">
        <small class="mr-2">Author: <a href="#">{{post.user.username}}</a></small><br>
        <small class="text-muted">{{post.posted.strftime('%d-%m-%Y at %H:%M:%S')}}</small>
        {% if post.user == current_user %}
        <div>
          <a href="{{url_for('main.update_posts', post_id=post.id)}}" class="btn btn-secondary btn-sm mt-1 mb-1">Update</a>
          <a href="{{url_for('main.delete_posts', post_id=post.id)}}" class="btn btn-danger btn-sm mt-1 mb-1">Delete</a>
        </div><hr>
        {% endif %}
      </div>
      <h2 class="article-title">{{ post.title }}</h2>
      <h4 class="article-content">{{ post.short_description }}</h4>
      <p>{{post.post_content}}</p>
    </div>
  </article>

  <div class="container">
    <div class="mt-3">
      {% for comment in comments %}
      {% if comment.id == comments[0].id%}
        <p class="card-header font-weight-bold">Comments</p>
      {%endif%}
      <div class="card-comments mb-3">
        <div class="card-body">
          <div class="media d-block d-md-flex mt-4">
            <img class="d-flex mb-3 mx-auto " src="{{url_for('static',filename=comment.user.profile_pic_path)}}" alt="Generic placeholder image" style="width: 80px;height: 80px;object-fit: cover; border-radius: 50%;">
          <div class="media-body text-center text-md-left ml-md-3 ml-0">
            <h5 class="mt-0 font-weight-bold">{{comment.user.username}}</h5>
              {{comment.contents}}
          </div>
          {% if post.user == current_user%}
            <div class="col-md-2">
              <h5><a class="nav-link" style="color: black;" href="{{url_for('main.delete_comment',post_id=post.id,comment_id=comment.id)}}"><i class="bi bi-trash"></i>Delete Comment</h5></a>
            </div>
          {%endif%}
        </div>
      </div>
    </div>
      {% endfor %}
        <br>
    <div class="mt-3 ">
      {{comment_form.hidden_tag()}}
      {{wtf.quick_form(comment_form)}}
    </div>
  </div>
{% endblock %}
